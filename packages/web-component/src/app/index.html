<!doctype html>
<html>
  <head>
    <title>Descope WC demo app</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Uncomment next section if you want to test CSP -->

    <!-- <meta
      http-equiv="Content-Security-Policy"
      content="connect-src 'self' static.descope.com api.descope.com;
    style-src 'unsafe-inline' fonts.googleapis.com;
    img-src static.descope.com content.app.descope.com;
    font-src fonts.gstatic.com;
    script-src 'self' static.descope.com;
  "
    /> -->
    <style>
      body {
        background-color: antiquewhite;
        position: relative;
        height: 100vh;
        margin: 0;
      }
      .login-container {
        width: 500px;
        min-height: 300px;
        margin: auto;
        position: relative;
        top: 50%;
        transform: translateY(-50%);
      }
    </style>
  </head>
  <body>
    <script type="module" src="../lib/descope-wc/index.ts"></script>
    <div class="login-container">
      <!-- <descope-wc
        project-id="<project-id>"
        flow-id="<flow-id>"
        base-url="<base-url>"
        locale="<locale>"
        debug="true"
      ></descope-wc> -->
      <descope-wc
        project-id="P2Z7E5t7guVNDNpljcc2DGLD6WyG"
        flow-id="sign-up-or-in"
        base-url="http://localhost:8000"
        locale="<locale>"
        debug="true"
      ></descope-wc>
      <descope-wc
        project-id="P2Z7E5t7guVNDNpljcc2DGLD6WyG"
        flow-id="post-auth-flow"
        base-url="http://localhost:8000"
        locale="<locale>"
        debug="true"
      ></descope-wc>
    </div>
    <script>
      // Translate or modify the error as needed
      function translateError(error) {
        const translationMap = {
          SAMLStartFailed: 'Failed to start SAML flow',
        };
        return translationMap[error.type] || error.text;
      }
      const descopeWcEle = document.getElementsByTagName('descope-wc')[0];

      descopeWcEle.errorTransformer = translateError;
      descopeWcEle.addEventListener('error', (e) =>
        alert(`Error! - ${e.detail.errorMessage}`),
      );
      descopeWcEle.addEventListener(
        'success',
        (e) => console.log('success', JSON.stringify(e.detail)),
        // alert(`Success! - ${JSON.stringify(e.detail)}`),
      );
    </script>
  </body>
</html>
